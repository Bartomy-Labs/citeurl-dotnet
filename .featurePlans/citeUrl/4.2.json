{
  "id": "4.2",
  "title": "Comprehensive Integration Testing with Real Citations",
  "objective": "Test end-to-end citation finding with real legal text from all 5 YAML template categories",
  "complexity": "moderate",
  "phaseId": "4",
  "taskNumber": 2,
  "totalTasksInPhase": 4,

  "metadata": {
    "taskType": "testing",
    "estimatedDuration": "4-6 hours",
    "dependencies": ["4.1"],
    "skillLevel": "intermediate"
  },

  "criticalAnchors": [
    "IMMUTABLE: Test samples from each of 5 YAML template files",
    "IMMUTABLE: Test actual legal opinion paragraphs",
    "IMMUTABLE: Verify URL generation for all major citation types",
    "IMMUTABLE: Port Python test cases"
  ],

  "agentInstructions": "## Task 4.2: Comprehensive Integration Testing\n\n### Test Categories\n\n**Create `tests/CiteUrl.Core.Tests/Integration/RealWorldTests.cs`:**\n\n```csharp\n[Fact]\npublic void FindsCaselaw() =>\n    Citator.Cite(\"477 U.S. 561\").ShouldNotBeNull();\n\n[Fact]\npublic void FindsUSC() =>\n    Citator.Cite(\"42 U.S.C. § 1983\").ShouldNotBeNull();\n\n[Fact]\npublic void FindsCFR() =>\n    Citator.Cite(\"29 C.F.R. § 1630.2\").ShouldNotBeNull();\n\n[Fact]\npublic void FindsStateCodes() =>\n    Citator.Cite(\"Cal. Civ. Code § 1234\").ShouldNotBeNull();\n\n[Fact]\npublic void HandlesComplexParagraph()\n{\n    var text = @\"Federal law provides remedies, 42 U.S.C. § 1983, \n        and fee awards, id. at (b), which are important. \n        See also 29 C.F.R. § 1630.2 for definitions.\";\n    \n    var citations = Citator.ListCitations(text).ToList();\n    citations.Count.ShouldBeGreaterThanOrEqualTo(2);\n}\n```\n\n### Port Python Tests\n\nReview Python tests at: `/c/Users/tlewers/source/repos/citeurl/tests/`\n- Port key test cases to C#\n- Verify same behavior\n\n### Verification\n- [ ] 20+ real citation tests\n- [ ] 5+ real-world paragraphs\n- [ ] Python tests ported\n- [ ] 100% pass rate",

  "successCriteria": [
    "20+ real citation tests across all categories",
    "5+ real-world text paragraph tests",
    "All Python key tests ported",
    "100% test pass rate",
    "URLs verified against Python version"
  ],

  "associatedArtifacts": [
    {
      "type": "test_file",
      "path": "tests/CiteUrl.Core.Tests/Integration/RealWorldTests.cs",
      "description": "Real-world citation tests"
    }
  ]
}
